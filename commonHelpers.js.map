{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon (1).svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__f9e7b27f__\"","import axios from 'axios';\n\nexport default function axiosImgs(dataFromForm, pageLoad = 1) {\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n\n  const API_KEY = '45225521-b1788b8383ce5fec9dc61aa0c';\n\n  const requestParams = {\n    params: {\n      key: API_KEY,\n      q: dataFromForm,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: pageLoad,\n    },\n  };\n  return axios.get('', requestParams);\n}\n","import iziToast from 'izitoast';\nimport icon from '../img/bi_x-octagon (1).svg';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst page = document.querySelector('.gallery');\n\n//load-more button\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nconst slb = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function gallery(pics, append = false) {\n  if (pics.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching <br> your search query. Please try again!',\n      messageColor: '#FFF',\n      backgroundColor: '#FF6865',\n      messageSize: '16',\n      position: 'topRight',\n      timeout: 4000,\n\n      iconUrl: icon,\n    });\n    page.innerHTML = '';\n\n    loadMoreButton.classList.add('hidden'); // Hide button during new search\n\n    return;\n  }\n\n  const markup = pics\n    .map(\n      pic =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${pic.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${pic.webformatURL}\"\n            alt=\"${pic.tags}\"\n            />\n        </a>\n        <p class=\"gallery-description\">\n          <span class=\"gallery-metadata\">Likes <span class=\"gallery-value\">${pic.likes}</span></span>\n          <span class=\"gallery-metadata\">Views <span class=\"gallery-value\">${pic.views}</span></span>\n          <span class=\"gallery-metadata\">Comments <span class=\"gallery-value\">${pic.comments}</span></span>\n          <span class=\"gallery-metadata\">Downloads <span class=\"gallery-value\">${pic.downloads}</span></span>\n        </p>\n      </li>\n    `\n    )\n    .join('');\n\n    //checking if it is a new search or load-more option\n  if (append) {\n    page.insertAdjacentHTML('beforeend', markup);\n  } else {\n    page.innerHTML = markup;\n  }\n\n  slb.refresh();\n\n  if (loadMoreButton) {\n    loadMoreButton.classList.remove('hidden'); // Show button if there are more images to load\n  }\n}\n\nexport function toggleLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.toggle('hidden');\n}\n","import iziToast from 'izitoast';\nimport icon from './img/bi_x-octagon (1).svg';\n\n//importing functions\nimport axiosImgs from './js/pixabay-api';\nimport { gallery, toggleLoader } from './js/render-functions';\n\nconst formInput = document.querySelector('.js-search-form');\n\n//load-more button\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nlet dataFromForm = '';\nlet pageLoad = 1;\n\n//Main script logic\nconst searchHandler = async event => {\n  event.preventDefault();\n\n  //Finding user's search query\n  dataFromForm = event.target.elements.input_search.value.trim();\n\n  //make custom loader visible, for that we have a function\n  toggleLoader();\n\n  try {\n    //checking user's query if it is empty or space\n    if (dataFromForm === '') {\n      iziToast.error({\n        message: \"Sorry, the form can't be empty!\",\n        messageColor: '#FFF',\n        backgroundColor: '#FF6865',\n        messageSize: '16',\n        position: 'topRight',\n        timeout: 4000,\n        iconUrl: icon,\n      });\n      formInput.reset();\n      return;\n    }\n\n    pageLoad = 1;\n\n    if (loadMoreButton) {\n      loadMoreButton.classList.add('hidden');\n    }\n\n    const {\n      data: { hits },\n    } = await axiosImgs(dataFromForm);\n    // const respond = await axiosImgs(dataFromForm);\n    // console.log('respond:', respond);\n\n    gallery(hits);\n\n    formInput.reset();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    toggleLoader();\n  }\n};\n\n//callback function for load more button\nconst loadMoreHandler = async event => {\n  try {\n    pageLoad += 1;\n    toggleLoader();\n    const {\n      data: { hits, totalHits },\n    } = await axiosImgs(dataFromForm, pageLoad);\n\n    let totalPages = Math.ceil(totalHits / 15);\n\n    if (pageLoad >= totalPages) {\n      iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#FFF',\n        backgroundColor: '#FF6865',\n        messageSize: '16',\n        position: 'topRight',\n        timeout: 4000,\n        iconUrl: icon,\n      });\n\n      loadMoreButton.classList.add('hidden');\n      return;\n    }\n\n    gallery(hits, true);\n\n    //scroll down\n    const height = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: 2 * height,\n      behavior: 'smooth', // Smooth scrolling\n    });\n  } catch (error) {\n    console.log(error);\n  } finally {\n    toggleLoader();\n  }\n};\n\n//submit button listener\nformInput.addEventListener('submit', searchHandler);\n\n//load more button 'listener'\nif (loadMoreButton) {\n  loadMoreButton.addEventListener('click', loadMoreHandler);\n}\n"],"names":["icon","axiosImgs","dataFromForm","pageLoad","axios","requestParams","page","loadMoreButton","slb","SimpleLightbox","gallery","pics","append","iziToast","markup","pic","toggleLoader","formInput","searchHandler","event","hits","error","loadMoreHandler","totalHits","totalPages","height"],"mappings":"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"}